<!DOCTYPE html>
<html>
<head>
    <title>NFC Test - No Cache</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; padding: 20px; }
        button { background: #0f0; color: #000; padding: 15px; font-size: 18px; cursor: pointer; margin: 10px; }
        #output { border: 1px solid #0f0; padding: 20px; margin-top: 20px; white-space: pre; }
    </style>
</head>
<body>
    <h1>NFC Test Page - Version 2</h1>
    <button onclick="testNFC()">SCAN NFC CARD</button>
    <div id="output">Click button to scan...</div>

    <script>
        function testNFC() {
            document.getElementById('output').textContent = 'Scanning...';
            
            fetch('/api/nfc')
                .then(r => r.json())
                .then(data => {
                    console.log('Got data:', data);
                    let output = JSON.stringify(data, null, 2);
                    
                    if (data.card_present) {
                        output = 'CARD DETECTED!\n\n';
                        output += 'UID: ' + data.uid_readable + '\n';
                        output += 'Type: ' + data.likely_type + '\n';
                        output += 'Manufacturer: ' + data.manufacturer + '\n';
                        output += '\nFull data:\n' + JSON.stringify(data, null, 2);
                    } else {
                        output = 'No card found\n\n' + JSON.stringify(data, null, 2);
                    }
                    
                    document.getElementById('output').textContent = output;
                })
                .catch(err => {
                    console.error('Error:', err);
                    document.getElementById('output').textContent = 'ERROR: ' + err;
                });
        }
    </script>
</body>
</html>
